# Browser: CORS

Cross-origin resource sharing ¬´—Å–æ–≤–º–µ—Å—Ç–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤ –º–µ–∂–¥—É —Ä–∞–∑–Ω—ã–º–∏ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏¬ª.

```
Access-Control-Allow-Origin: http://example.com http://www.b.com
```

```
Access-Control-Allow-Origin: *
```

## What is same-origin policy

The same-origin policy is a policy that prevents JavaScript from making requests across domain boundaries. An origin is defined as a combination of URI scheme, hostname, and port number. This policy is enabled by default and prevents a malicious script on one page from obtaining access to sensitive data on another web page using Document Object Model(DOM).

https://github.com/sudheerj/javascript-interview-questions#what-is-same-origin-policy

## Preflight request

- :beginner: [CORS –∏ preflight request: –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç, –∑–∞–≥–æ–ª–æ–≤–∫–∏, –∫—ç—à](https://sky.pro/wiki/javascript/cors-i-preflight-request-kak-rabotaet-zagolovki-kesh/)

OPTIONS request, using HTTP request headers Access-Control-Request-Method, Origin, and optionally Access-Control-Request-Headers

üí° –ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏, preflight –∑–∞–ø—Ä–æ—Å ‚Äì —ç—Ç–æ –∫–∞–∫ –µ—Å–ª–∏ –±—ã –≤—ã –ø–µ—Ä–µ–¥ –ø–æ–∫—É–ø–∫–æ–π –≤ –º–∞–≥–∞–∑–∏–Ω–µ –∑–≤–æ–Ω–∏–ª–∏ —Ç—É–¥–∞ –∏ —Å–ø—Ä–∞—à–∏–≤–∞–ª–∏, –º–æ–∂–Ω–æ –ª–∏ –∫—É–ø–∏—Ç—å —Ç–æ–≤–∞—Ä –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–º —Å–ø–æ—Å–æ–±–æ–º –∏ –≤–∑—è—Ç—å —Å —Å–æ–±–æ–π —Å–≤–æ—é —Å—É–º–∫—É. –ï—Å–ª–∏ –º–∞–≥–∞–∑–∏–Ω –≥–æ–≤–æ—Ä–∏—Ç "–¥–∞", –≤—ã –∏–¥–µ—Ç–µ –Ω–∞ –ø–æ–∫—É–ø–∫–∏. –ï—Å–ª–∏ "–Ω–µ—Ç" ‚Äì –≤—ã –Ω–µ —Ç—Ä–∞—Ç–∏—Ç–µ —Å–≤–æ–µ –≤—Ä–µ–º—è.

### –ü—Ä–∏–º–µ—Ä

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã —Å—Ç—Ä–æ–∏—Ç–µ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –∑–∞–º–µ—Ç–∫–∏ –æ–Ω–ª–∞–π–Ω. –í–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (—Å–∫–∞–∂–µ–º, myapp.com) —Ö–æ—á–µ—Ç –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫—É –Ω–∞ —Å–µ—Ä–≤–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –Ω–∞ –¥—Ä—É–≥–æ–º –¥–æ–º–µ–Ω–µ (notesapi.com). –í—ã —Ä–µ—à–∏–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–µ—Ç–æ–¥ POST –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∑–∞–º–µ—Ç–∫–∏.

–í–æ—Ç –∫–∞–∫ –≤—ã–≥–ª—è–¥–∏—Ç –≤–∞—à JavaScript –∫–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–º–µ—Ç–∫–∏:

```js
fetch("https://notesapi.com/api/notes", {
  method: "POST",
  headers: {
    "Content-Type": "application/json",
    "Authorization": "Bearer –≤–∞—à_—Ç–æ–∫–µ–Ω_–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏"
  },
  body: JSON.stringify({
    title: "–ú–æ—è –Ω–æ–≤–∞—è –∑–∞–º–µ—Ç–∫–∞",
    content: "–°–æ–¥–µ—Ä–∂–∏–º–æ–µ –º–æ–µ–π –Ω–æ–≤–æ–π –∑–∞–º–µ—Ç–∫–∏"
  })
});
```

Preflight Request: –ü–µ—Ä–µ–¥ —Ç–µ–º, –∫–∞–∫ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –≤–∞—à POST –∑–∞–ø—Ä–æ—Å, –≤–∞—à –±—Ä–∞—É–∑–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å (preflight request) –∏—Å–ø–æ–ª—å–∑—É—è –º–µ—Ç–æ–¥ OPTIONS. –≠—Ç–æ—Ç –∑–∞–ø—Ä–æ—Å —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä notesapi.com, –º–æ–∂–µ—Ç –ª–∏ –æ–Ω –ø—Ä–∏–Ω—è—Ç—å –≤–∞—à –æ—Å–Ω–æ–≤–Ω–æ–π –∑–∞–ø—Ä–æ—Å —Å —Ç–∞–∫–∏–º–∏ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏ –∏ –º–µ—Ç–æ–¥–æ–º.

–ó–∞–≥–æ–ª–æ–≤–∫–∏ Preflight Request: –í —ç—Ç–æ–º –∑–∞–ø—Ä–æ—Å–µ –±—Ä–∞—É–∑–µ—Ä –≤–∫–ª—é—á–∞–µ—Ç –∑–∞–≥–æ–ª–æ–≤–∫–∏, —Ç–∞–∫–∏–µ –∫–∞–∫ Access-Control-Request-Method (—Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º POST), Access-Control-Request-Headers (—Å–æ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏, –∫–æ—Ç–æ—Ä—ã–µ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä, Content-Type –∏ Authorization), –∏ Origin (—Å–æ –∑–Ω–∞—á–µ–Ω–∏–µ–º https://myapp.com).

–û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞: –ï—Å–ª–∏ —Å–µ—Ä–≤–µ—Ä notesapi.com –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ –∏ —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —Ç–∞–∫–∏–µ –∑–∞–ø—Ä–æ—Å—ã, –æ–Ω –æ—Ç–≤–µ—Ç–∏—Ç –Ω–∞ preflight –∑–∞–ø—Ä–æ—Å —Å –∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏, —É–∫–∞–∑—ã–≤–∞—é—â–∏–º–∏, —á—Ç–æ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ myapp.com –º–æ–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∑–∞–ø—Ä–æ—Å—ã –º–µ—Ç–æ–¥–æ–º POST –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω—É–∂–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏.

–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞: –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞ –æ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ preflight –∑–∞–ø—Ä–æ—Å, –≤–∞—à –±—Ä–∞—É–∑–µ—Ä –æ—Ç–ø—Ä–∞–≤–∏—Ç –æ—Å–Ω–æ–≤–Ω–æ–π POST –∑–∞–ø—Ä–æ—Å —Å –¥–∞–Ω–Ω—ã–º–∏ –∑–∞–º–µ—Ç–∫–∏.

### –û—Ç–≤–µ—Ç —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ preflight –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç –≤–∫–ª—é—á–∞—Ç—å:

- Access-Control-Allow-Origin: —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –¥–æ–º–µ–Ω—ã –º–æ–≥—É—Ç –ø–æ–ª—É—á–∞—Ç—å –æ—Ç–≤–µ—Ç—ã.
- Access-Control-Allow-Methods: –ø–µ—Ä–µ—á–∏—Å–ª—è–µ—Ç –º–µ—Ç–æ–¥—ã, —Ä–∞–∑—Ä–µ—à–µ–Ω–Ω—ã–µ –¥–ª—è –∫—Ä–æ—Å—Å-–¥–æ–º–µ–Ω–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤.
- Access-Control-Allow-Headers: —É–∫–∞–∑—ã–≤–∞–µ—Ç, –∫–∞–∫–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω—ã –≤ –∑–∞–ø—Ä–æ—Å–µ.
- Access-Control-Max-Age: —Å–æ–æ–±—â–∞–µ—Ç, –∫–∞–∫ –¥–æ–ª–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç preflight –∑–∞–ø—Ä–æ—Å–∞ –º–æ–∂–µ—Ç –±—ã—Ç—å –∫—ç—à–∏—Ä–æ–≤–∞–Ω.

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –≤ preflight-–æ–≤–µ—Ç–µ —Å–µ—Ä–≤–µ—Ä–∞ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `Access-Control-Max-Age`.
