# CSS: z-index

## Контекст наложения / stacking context

_Контекст наложения_ — Все элементы внутри этого контекста сортируются и располагаются с оглядкой друг на друга.

При создании _stacking context_ вложенные в него дочерние блоки будут сортироваться и располагаться уже по правилам этого нового, родительского контекста наложения.

Новый контекст наложения формируется, если:

1. это корневой элемент ([`<html>`](https://doka.guide/html/html/)),
2. `position:` `absolute` / `relative` со свойством [`z-index`](https://doka.guide/css/z-index/), значение которого не `auto`,
3. flex-элемент + `z-index`, значение которого не `auto` и чей родительский элемент имеет свойство [`display: flex`](https://doka.guide/css/flexbox-guide/) или `display: inline-flex`,
4. `opacity < 1`
5. `transform`
6. `mix-blend-mode`
7. `filter`
8. `isolation: isolate`
9. `position: fixed`
10. `will-change`
11. `-webkit-overflow-scrolling: touch`

"Разные колоды карт": Элементы внутри _контекста наложения_ никогда не могут быть выше или ниже элемента, создавшего этот контекст.

### Порядок наложения

Внутри каждого контекста наложения существует свой порядок отрисовки элементов и их компонентов. Ниже перечисление идёт от самого нижнего слоя, до самого верхнего:

1. `background`, `border`
2. Позиционированные элементы (включая потомков) с `z-index < 0`
3. `display: block` без контекста наложения
4. `float`
5. `display: inline`
6. `z-index`: `auto` / `0` или `opacity < 1`
7. `z-index > 0`

- [Контекст наложения — CSS — Дока](https://doka.guide/css/stacking-context/)